(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{38:function(e,t,a){e.exports=a(71)},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),u=a(10),o=a(13),s=a(33),i=a(34),m=a(5),p=a(1),d=a.n(p),f=a(4),v=a(15),g=a(12),E=a.n(g),b=null,h={getAll:function(){var e=Object(f.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/blogs");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,E.a.post("/api/blogs",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){b="bearer ".concat(e)},update:function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.put("".concat("/api/blogs","/").concat(t),a);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),remove:function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:b}},e.next=3,E.a.delete("".concat("/api/blogs","/").concat(t),a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOG":return t.data;case"NEW_BLOG":return e.concat(t.data);case"LIKE":var a=t.data.id,n=e.find((function(e){return e.id==a})),r=Object(v.a)(Object(v.a)({},n),{},{likes:n.likes+1}),l=e.map((function(e){return e.id!==a?e:r}));return l;case"DELETE":var c=t.data.id,u=e.filter((function(e){return e.id!==c}));return u;default:return e}},y=a(3),k=a(18),O=function(e){var t=e.blog,a=Object(m.b)(),l=Object(m.c)((function(e){return e.blog})),c=Object(n.useState)(!1),u=Object(k.a)(c,2),o=u[0],s=u[1],i={display:o?"":"none"},p={display:o?"none":""},g=function(){s(!o)},E=function(){var e=Object(f.a)(d.a.mark((function e(t,n){var r,c,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.find((function(e){return e.id===t})),c=Object(v.a)(Object(v.a)({},r),{},{likes:r.likes+1}),e.next=4,h.update(t,c);case 4:u=e.sent,a({type:"LIKE",data:u});case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),b={display:"none"},w=window.localStorage.getItem("loggedBlogappUser");if(w){var y=JSON.parse(w),O=t.user?t.user.username:t;b={display:y.username==O?"":"none"},console.log(t.user),console.log("This is logged user ".concat(y.username))}return r.a.createElement("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1},className:"newtest"},r.a.createElement("div",{style:p,className:"blogtest"},t.title," by ",t.author,r.a.createElement("button",{onClick:g}," view ")),r.a.createElement("div",{style:i,className:"hiddennewtest"},r.a.createElement("p",null,r.a.createElement("span",{class:"listhead"},"Title : ")," ",t.title," by ",t.author," ",r.a.createElement("button",{onClick:g}," hide ")," "),r.a.createElement("p",null,"  ",r.a.createElement("span",{class:"listhead"},"Link : ")," ",t.url," "),r.a.createElement("p",null," ",r.a.createElement("span",{class:"listhead"}," Likes:")," ",t.likes," ",r.a.createElement("button",{onClick:function(){return E(t.id,t)}}," like ")," "),r.a.createElement("p",null," ",r.a.createElement("button",{style:b,onClick:function(){return function(e,t){window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))&&(h.remove(e),a({type:"DELETE",data:t}))}(t.id,t)}}," remove "))))},j=function(e){return{type:"SET_NOTIFICATION",data:e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;default:return e}},T=function(){var e=Object(m.b)(),t=function(){var t=Object(f.a)(d.a.mark((function t(a){var n,r,l,c,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=a.target.title.value,r=a.target.author.value,l=a.target.url.value,a.target.title.value="",a.target.author.value="",a.target.url.value="",c={title:n,author:r,url:l},t.prev=8,t.next=11,h.create(c);case 11:u=t.sent,e({type:"NEW_BLOG",data:u}),e(j("".concat(n," by ").concat(r," added"))),setTimeout((function(){e(j(null))}),5e3),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(8),console.log("There was an error");case 20:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{class:"formcont"},r.a.createElement("div",{class:"blogformheading"},r.a.createElement("h2",null," Add a new blog  ")),r.a.createElement("div",{class:"blogform"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{class:"input"},r.a.createElement("p",null," Title "),r.a.createElement("input",{type:"text",name:"title"})),r.a.createElement("div",{class:"input"},r.a.createElement("p",null," Author "),r.a.createElement("input",{type:"text",name:"author"})),r.a.createElement("div",{class:"input"},r.a.createElement("p",null," Url "),r.a.createElement("input",{type:"text",name:"url"})),r.a.createElement("button",{class:"blogbutton",typep:"submit"}," create "))))},S=r.a.forwardRef((function(e,t){var a=Object(n.useState)(!1),l=Object(k.a)(a,2),c=l[0],u=l[1],o={display:c?"":"none"},s={display:c?"none":""},i=function(){u(!c)};return Object(n.useImperativeHandle)(t,(function(){return{toggleVisibility:i}})),S.displayName="Toggable",r.a.createElement("div",null,r.a.createElement("div",{style:s},r.a.createElement("button",{onClick:i}," ",e.buttonLabel," ")),r.a.createElement("div",{style:o},e.children,r.a.createElement("button",{onClick:i}," cancel ")))})),I=function(e){return{type:"SET_USER",data:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;default:return e}},B={login:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login/",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=Object(m.b)(),t=function(){var t=Object(f.a)(d.a.mark((function t(a){var n,r,l,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=a.target.username.value,r=a.target.password.value,a.target.username.value="",a.target.password.value="",l={username:n,password:r},t.prev=6,t.next=9,B.login(l);case 9:c=t.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(c)),h.setToken(c.token),e(I(c)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(6),e(j("invalid username or password")),setTimeout((function(){e(j(null))}),5e3);case 19:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{class:"formcont"},r.a.createElement("div",{class:"blogformheading"},r.a.createElement("h2",null," Login ")),r.a.createElement("div",{class:"blogform"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{class:"input"},r.a.createElement("p",null," username "),r.a.createElement("input",{type:"text",name:"username"})),r.a.createElement("div",{class:"input"},r.a.createElement("p",null," password "),r.a.createElement("input",{type:"text",name:"password"})),r.a.createElement("button",{type:"submit"}," login "))))},U={getAll:function(){return E.a.get("/api/users/").data},create:function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/users/",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(y.f)(),t=Object(m.b)(),a=function(){var a=Object(f.a)(d.a.mark((function a(n){var r,l,c,u,o;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=n.target.name.value,l=n.target.username.value,c=n.target.username.value,n.target.name.value="",n.target.username.value="",n.target.username.value="",u={name:r,username:l,password:c},a.prev=8,a.next=11,U.create(u);case 11:o=a.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(o)),h.setToken(o.token),t(I(o)),e.push("/"),a.next=22;break;case 18:a.prev=18,a.t0=a.catch(8),t(j("username already exists")),setTimeout((function(){t(j(null))}),5e3);case 22:case"end":return a.stop()}}),a,null,[[8,18]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{class:"formcont"},r.a.createElement("div",{class:"blogformheading"},r.a.createElement("h2",null," Register ")),r.a.createElement("div",{class:"blogform"},r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{class:"input"},r.a.createElement("p",null," name "),r.a.createElement("input",{type:"text",name:"Name"})),r.a.createElement("div",{class:"input"},r.a.createElement("p",null," username "),r.a.createElement("input",{type:"text",name:"Username"})),r.a.createElement("div",{class:"input"},r.a.createElement("p",null," password"),r.a.createElement("input",{type:"text",name:"Password"})),r.a.createElement("button",{type:"submit"}," sign Up "))))},A=function(){var e=Object(m.b)(),t=Object(m.c)((function(e){return e.user}));return t?r.a.createElement("div",{class:"headeruser"},r.a.createElement("p",null,"  Hello ",t.name,"  ",r.a.createElement("button",{onClick:function(t){t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),e(I(null))}}," logout "))):r.a.createElement("div",{class:"headeruser"},r.a.createElement(u.b,{to:"/register"}," Register"),r.a.createElement(u.b,{to:"/login"}," Log In"))},D=function(){return r.a.createElement("div",{class:"maincont"},r.a.createElement("div",{class:"imagecont"},r.a.createElement("img",{src:"https://purepng.com/public/uploads/large/purepng.com-white-paper-planpaper-planeaeroplanepaper-gliderpaper-dartaircraftfolded-paperpaperboardclipart-14215265881356kjut.png"})),r.a.createElement("div",{class:"contentcont"},r.a.createElement("div",{class:"contentheading"},r.a.createElement("h3",null," Welcome")),r.a.createElement("div",{class:"contenttext"},r.a.createElement("p",null," Welcome to the Bloglist, a collection of health related blogs that have impacted our user's lifes. Users have the ability to view all blog links, make sure to like your favourite links. Blogs are listed in descending order of likes. Feel free to delete blogs that you adedd and feel no longer add value to your fellow member's lifes ")),r.a.createElement("div",{class:"contentbutton"},r.a.createElement("button",null," ",r.a.createElement(u.b,{to:"/blogs"}," View Blogs ")," "))))},R=function(){var e=Object(m.b)();Object(n.useEffect)((function(){e(function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getAll();case 2:a=e.sent,t({type:"INIT_BLOG",data:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(n.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogappUser");if(t){var a=JSON.parse(t);e(I(a)),h.setToken(a.token)}}),[]);var t=Object(m.c)((function(e){return e.blog})),a=Object(m.c)((function(e){return e.notify})),l=Object(m.c)((function(e){return e.user})),c=(Object(y.f)(),function(t){t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),e(I(null))});Object(n.useRef)();return r.a.createElement("div",null,r.a.createElement("div",{class:"bodycont1"},r.a.createElement("h3",{class:"headerlogo"}," BlogList"),r.a.createElement(u.b,{class:"headerlink",to:"/"}," Home "),r.a.createElement(u.b,{class:"headerlink",to:"/newblog"}," New Blog "),r.a.createElement(u.b,{class:"headerlink",to:"/blogs"}," Blogs "),r.a.createElement(A,null)),r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/newblog"},r.a.createElement("div",null,null===l?r.a.createElement("div",null,r.a.createElement(L,null)):r.a.createElement(T,null))),r.a.createElement(y.a,{path:"/register"},r.a.createElement("div",null,null===l?r.a.createElement("div",null,r.a.createElement(C,null)):r.a.createElement("div",null,r.a.createElement("p",null," ",l.name," logged-in ",r.a.createElement("button",{onClick:c}," logout "))))),r.a.createElement(y.a,{path:"/login"},r.a.createElement("div",null,null===l?r.a.createElement("div",null,r.a.createElement(L,null)):r.a.createElement("div",null,r.a.createElement("p",null," ",l.name," logged-in ",r.a.createElement("button",{onClick:c}," logout "))))),r.a.createElement(y.a,{path:"/blogs"},r.a.createElement("h3",null," ",a," "),r.a.createElement("div",null,null===l?r.a.createElement("div",null,r.a.createElement("div",{class:"loginform"},r.a.createElement(L,null)),r.a.createElement("div",{class:"signupform"},r.a.createElement(C,null))):r.a.createElement("div",{class:"bloglistcont"},t.sort((function(e,t){return e.likes-t.likes})).map((function(e){return r.a.createElement(O,{key:e.id,blog:e})}))))),r.a.createElement(y.a,{path:"/"},r.a.createElement(D,null))))},_=Object(o.combineReducers)({blog:w,notify:x,user:N}),J=Object(o.createStore)(_,Object(i.composeWithDevTools)(Object(o.applyMiddleware)(s.a)));c.a.render(r.a.createElement(u.a,null,r.a.createElement(m.a,{store:J},r.a.createElement(R,null))),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.cdc64541.chunk.js.map