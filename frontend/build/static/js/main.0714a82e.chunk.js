(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{71:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(18),s=n.n(c),a=n(9),i=n(14),l=n(34),o=n(35),u=n(6),d=n(2),j=n.n(d),b=n(5),p=n(16),h=n(13),O=n.n(h),x="/api/blogs",f=null,v={getAll:function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get(x);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,O.a.post(x,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)},update:function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.put("".concat(x,"/").concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:f}},e.next=3,O.a.delete("".concat(x,"/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_BLOG":return t.data;case"NEW_BLOG":return e.concat(t.data);case"LIKE":var n=t.data.id,r=e.find((function(e){return e.id==n})),c=Object(p.a)(Object(p.a)({},r),{},{likes:r.likes+1}),s=e.map((function(e){return e.id!==n?e:c}));return s;case"DELETE":var a=t.data.id,i=e.filter((function(e){return e.id!==a}));return i;default:return e}},m=n(4),w=n(19),y=n(0),k=function(e){var t=e.blog,n=Object(u.b)(),c=Object(u.c)((function(e){return e.blog})),s=Object(r.useState)(!1),a=Object(w.a)(s,2),i=a[0],l=a[1],o={display:i?"":"none"},d={display:i?"none":""},h=function(){l(!i)},O=function(){var e=Object(b.a)(j.a.mark((function e(t,r){var s,a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=c.find((function(e){return e.id===t})),a=Object(p.a)(Object(p.a)({},s),{},{likes:s.likes+1}),e.next=4,v.update(t,a);case 4:i=e.sent,n({type:"LIKE",data:i});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x={display:"none"},f=window.localStorage.getItem("loggedBlogappUser");if(f){var g=JSON.parse(f),m=t.user?t.user.username:t;x={display:g.username==m?"":"none"},console.log(t.user),console.log("This is logged user ".concat(g.username))}return Object(y.jsxs)("div",{style:{paddingTop:10,paddingLeft:2,border:"solid",borderWidth:1},className:"newtest",children:[Object(y.jsxs)("div",{style:d,className:"blogtest",children:[t.title," by ",t.author,Object(y.jsx)("button",{onClick:h,children:" view "})]}),Object(y.jsxs)("div",{style:o,className:"hiddennewtest",children:[Object(y.jsxs)("p",{children:[Object(y.jsx)("span",{class:"listhead",children:"Title : "})," ",t.title," by ",t.author," ",Object(y.jsx)("button",{onClick:h,children:" hide "})," "]}),Object(y.jsxs)("p",{children:["  ",Object(y.jsx)("span",{class:"listhead",children:"Link : "})," ",t.url," "]}),Object(y.jsxs)("p",{children:[" ",Object(y.jsx)("span",{class:"listhead",children:" Likes:"})," ",t.likes," ",Object(y.jsx)("button",{onClick:function(){return O(t.id,t)},children:" like "})," "]}),Object(y.jsxs)("p",{children:[" ",Object(y.jsx)("button",{style:x,onClick:function(){return function(e,t){window.confirm("Remove blog ".concat(t.title," by ").concat(t.author))&&(v.remove(e),n({type:"DELETE",data:t}))}(t.id,t)},children:" remove "})]})]})]})},T=function(e){return{type:"SET_NOTIFICATION",data:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":return t.data;default:return e}},I=function(){var e=Object(u.b)(),t=function(){var t=Object(b.a)(j.a.mark((function t(n){var r,c,s,a,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=n.target.title.value,c=n.target.author.value,s=n.target.url.value,n.target.title.value="",n.target.author.value="",n.target.url.value="",a={title:r,author:c,url:s},t.prev=8,t.next=11,v.create(a);case 11:i=t.sent,e({type:"NEW_BLOG",data:i}),e(T("".concat(r," by ").concat(c," added"))),setTimeout((function(){e(T(null))}),5e3),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(8),console.log("There was an error");case 20:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{class:"formcont",children:[Object(y.jsx)("div",{class:"blogformheading",children:Object(y.jsx)("h2",{children:" Add a new blog  "})}),Object(y.jsx)("div",{class:"blogform",children:Object(y.jsxs)("form",{onSubmit:t,children:[Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" Title "}),Object(y.jsx)("input",{type:"text",name:"title"})]}),Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" Author "}),Object(y.jsx)("input",{type:"text",name:"author"})]}),Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" Url "}),Object(y.jsx)("input",{type:"text",name:"url"})]}),Object(y.jsx)("button",{class:"blogbutton",typep:"submit",children:" create "})]})})]})},E=function(e){return{type:"SET_USER",data:e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.data;default:return e}},B={login:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login/",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){var e=Object(m.f)(),t=Object(u.b)(),n=function(){var n=Object(b.a)(j.a.mark((function n(r){var c,s,a,i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),c=r.target.username.value,s=r.target.password.value,r.target.username.value="",r.target.password.value="",a={username:c,password:s},n.prev=6,n.next=9,B.login(a);case 9:i=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(i)),v.setToken(i.token),t(E(i)),e.push("/"),n.next=20;break;case 16:n.prev=16,n.t0=n.catch(6),t(T("invalid username or password")),setTimeout((function(){t(T(null))}),5e3);case 20:case"end":return n.stop()}}),n,null,[[6,16]])})));return function(e){return n.apply(this,arguments)}}();return Object(y.jsxs)("div",{class:"formcont",children:[Object(y.jsx)("div",{class:"blogformheading",children:Object(y.jsx)("h2",{children:" Login "})}),Object(y.jsx)("div",{class:"blogform",children:Object(y.jsxs)("form",{onSubmit:n,children:[Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" username "}),Object(y.jsx)("input",{type:"text",name:"username"})]}),Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" password "}),Object(y.jsx)("input",{type:"password",name:"password"})]}),Object(y.jsx)("button",{type:"submit",children:" login "})]})})]})},U="/api/users/",A={getAll:function(){return O.a.get(U).data},create:function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post(U,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(m.f)(),t=Object(u.b)(),n=function(){var n=Object(b.a)(j.a.mark((function n(r){var c,s,a,i,l;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),c=r.target.name.value,s=r.target.username.value,a=r.target.password.value,r.target.name.value="",r.target.username.value="",r.target.password.value="",i={name:c,username:s,password:a},n.prev=8,n.next=11,A.create(i);case 11:l=n.sent,window.localStorage.setItem("loggedBlogappUser",JSON.stringify(l)),v.setToken(l.token),t(E(l)),e.push("/"),n.next=22;break;case 18:n.prev=18,n.t0=n.catch(8),t(T("username already exists")),setTimeout((function(){t(T(null))}),5e3);case 22:case"end":return n.stop()}}),n,null,[[8,18]])})));return function(e){return n.apply(this,arguments)}}();return Object(y.jsxs)("div",{class:"formcont",children:[Object(y.jsx)("div",{class:"blogformheading",children:Object(y.jsx)("h2",{children:" Register "})}),Object(y.jsx)("div",{class:"blogform",children:Object(y.jsxs)("form",{onSubmit:n,children:[Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" name "}),Object(y.jsx)("input",{type:"text",name:"name"})]}),Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" username "}),Object(y.jsx)("input",{type:"text",name:"username"})]}),Object(y.jsxs)("div",{class:"input",children:[Object(y.jsx)("p",{children:" password"}),Object(y.jsx)("input",{type:"password",name:"password"})]}),Object(y.jsx)("button",{type:"submit",children:" sign Up "})]})})]})},D=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.user}));return t?Object(y.jsx)("div",{className:"headeruser",children:Object(y.jsxs)("p",{children:[" ","Hello ",t.name," ",Object(y.jsx)("button",{onClick:function(t){t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),e(E(null))},children:" logout "})]})}):Object(y.jsxs)("div",{className:"headeruser",children:[Object(y.jsx)(a.b,{to:"/register",children:" Register"}),Object(y.jsx)(a.b,{to:"/login",children:" Log In"})]})},_=function(){return Object(y.jsxs)("div",{class:"maincont",children:[Object(y.jsx)("div",{class:"imagecont",children:Object(y.jsx)("img",{src:"https://purepng.com/public/uploads/large/purepng.com-white-paper-planpaper-planeaeroplanepaper-gliderpaper-dartaircraftfolded-paperpaperboardclipart-14215265881356kjut.png"})}),Object(y.jsxs)("div",{class:"contentcont",children:[Object(y.jsx)("div",{class:"contentheading",children:Object(y.jsx)("h3",{children:" Welcome"})}),Object(y.jsx)("div",{class:"contenttext",children:Object(y.jsx)("p",{children:" Welcome to the Bloglist, a collection of programming resources that have positively impacted our user's lifes. Users have the ability to view all blog links, make sure to like your favourite links. Blogs are listed in descending order of likes. Feel free to delete blogs that you adedd and feel no longer add value to your fellow member's lifes "})}),Object(y.jsx)("div",{class:"contentbutton",children:Object(y.jsxs)("button",{children:[" ",Object(y.jsx)(a.b,{to:"/blogs",children:" View Blogs "})," "]})})]})]})},J=function(){var e=Object(u.b)();Object(r.useEffect)((function(){e(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getAll();case 2:n=e.sent,t({type:"INIT_BLOG",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogappUser");if(t){var n=JSON.parse(t);e(E(n)),v.setToken(n.token)}}),[]);var t=Object(u.c)((function(e){return e.blog})),n=Object(u.c)((function(e){return e.notify})),c=Object(u.c)((function(e){return e.user})),s=function(t){t.preventDefault(),window.localStorage.removeItem("loggedBlogappUser"),e(E(null))};return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{class:"bodycont1",children:[Object(y.jsx)("h3",{class:"headerlogo",children:" BlogList"}),Object(y.jsx)(a.b,{class:"headerlink",to:"/",children:" Home "}),Object(y.jsx)(a.b,{class:"headerlink",to:"/newblog",children:" New Blog "}),Object(y.jsx)(a.b,{class:"headerlink",to:"/blogs",children:" Blogs "}),Object(y.jsx)(D,{})]}),Object(y.jsxs)(m.c,{children:[Object(y.jsx)(m.a,{path:"/newblog",children:Object(y.jsx)("div",{children:null===c?Object(y.jsx)("div",{children:Object(y.jsx)(L,{})}):Object(y.jsx)(I,{})})}),Object(y.jsx)(m.a,{path:"/register",children:Object(y.jsx)("div",{children:null===c?Object(y.jsx)("div",{children:Object(y.jsx)(C,{})}):Object(y.jsx)("div",{children:Object(y.jsxs)("p",{children:[" ",c.name," logged-in ",Object(y.jsx)("button",{onClick:s,children:" logout "})]})})})}),Object(y.jsx)(m.a,{path:"/login",children:Object(y.jsx)("div",{children:null===c?Object(y.jsx)("div",{children:Object(y.jsx)(L,{})}):Object(y.jsx)("div",{children:Object(y.jsxs)("p",{children:[" ",c.name," logged-in ",Object(y.jsx)("button",{onClick:s,children:" logout "})]})})})}),Object(y.jsxs)(m.a,{path:"/blogs",children:[Object(y.jsxs)("h3",{children:[" ",n," "]}),Object(y.jsx)("div",{children:null===c?Object(y.jsx)("div",{children:Object(y.jsx)("div",{class:"loginform",children:Object(y.jsx)(L,{})})}):Object(y.jsx)("div",{class:"bloglistcont",children:t.sort((function(e,t){return t.likes-e.likes})).map((function(e){return Object(y.jsx)(k,{blog:e},e.id)}))})})]}),Object(y.jsx)(m.a,{path:"/",children:Object(y.jsx)(_,{})})]})]})},R=Object(i.combineReducers)({blog:g,notify:S,user:N}),W=Object(i.createStore)(R,Object(o.composeWithDevTools)(Object(i.applyMiddleware)(l.a)));s.a.render(Object(y.jsx)(a.a,{children:Object(y.jsx)(u.a,{store:W,children:Object(y.jsx)(J,{})})}),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.0714a82e.chunk.js.map